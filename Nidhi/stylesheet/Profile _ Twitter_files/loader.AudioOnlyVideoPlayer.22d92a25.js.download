(window.webpackJsonp=window.webpackJsonp||[]).push([[141],{u2Vg:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return b})),n.d(e,"__DANGEROUS_IMPORT_VIDEOPLAYER__",(function(){return C}));n("kYxP");var o=n("ERkP"),i=n("v6aA"),a=n("rxPX");const r=()=>(t,e,{api:n})=>n.getHttpClient();var c=Object(a.a)().propsFromActions((()=>({getTwitterAuthedHttpClient:r}))).withAnalytics(),l=n("Pc/x"),s=n("gOg7");var u=n("epkG"),p=n("88qn"),d=n("mf9H"),y=n("lklz"),f=n("MWbm"),g=n("Zl35"),m=n("rHpw");function b(t){const{featureSwitches:e}=o.useContext(i.a),{broadcastId:n,mediaKey:a,media:r,requestedTimecode:c,onEnded:u,onPlayerApi:f,onPlayerState:g}=t,[m,b]=o.useState(null),C=o.useRef({playbackCoordinationEmitter:null,previousPlayerState:null}),v=r||n&&a;if(o.useEffect((()=>{null===m&&v&&Object(p.a)({showControls:!1,source:{}},e).then((t=>b((()=>t))))}),[m,v,e]),o.useEffect((()=>function(){const{playbackCoordinationEmitter:t}=C.current;t&&t.unregister()}),[]),null===m||!v)return null;const w={analytics:function(t,e){const n={scribeContext:{...t.analytics.contextualScribeNamespace},enableShortFormCompleteLogging:e.isTrue("responsive_web_video_pcomplete_enabled"),periscopeAuthToken:l.a.proxsee.authToken()},o={log:e=>{const{category:n,data:o,namespace:i}=e;null!=i&&i.action&&t.analytics.scribe({...i,data:{...o,_category_:n}})}};return new s.a(o,{log:()=>{}},t.getTwitterAuthedHttpClient(),n)}(t,e),basePlayerClass:m,httpClient:k,onApiReady:function(t){if("function"==typeof f){var e;f(t);const n=null==r||null==(e=r.video_info)?void 0:e.duration_millis;"number"==typeof n&&"number"==typeof c&&t.scrubToFraction(c/n)}C.current.playbackCoordinationEmitter=function(t){const e={onAutoPlayRequest:()=>{},onPauseRequest:t,canAutoplay:!1,isLooping:!1};return d.c.register(e)}((()=>t.pause()))},onStateUpdate:function(t,e){"function"==typeof g&&g(t,e),function(t){const e=P(t);t.isPlaying&&e&&e.durationMs===e.currentTimeMs&&"function"==typeof u&&(u(),C.current.playbackCoordinationEmitter&&C.current.playbackCoordinationEmitter.signalPlaybackFinish())}(t),function(t){const{playbackCoordinationEmitter:e,previousPlayerState:n}=C.current,o=null===n,i=null==n?void 0:n.isPlaying,a=t.isPlaying,r=!o&&i&&!a;!o&&i||!a?r&&e&&e.signalPause():e&&e.signalPlay()}(t),C.current.previousPlayerState=t},twitterAuthedHttpClient:t.getTwitterAuthedHttpClient()};if(n&&a){const t={...w,configType:"static",contentId:a,contentType:"broadcast",variants:[],videoId:y.b.forAudioSpace(n,a)};return o.createElement(_,{key:n,playerConfig:t})}if(r){const t={...w,configType:"static",contentId:r.id_str,loop:!1,contentType:"media_entity",durationMs:r.video_info.duration_millis,variants:r.video_info.variants.map((({bitrate:t,content_type:e,url:n})=>({type:e,src:n})))};return o.createElement(_,{key:r.id_str,playerConfig:t})}return null}function _({playerConfig:t}){return o.createElement(f.a,{style:v.displayNone},o.createElement(g.b,t))}const C=c(b),P=t=>t&&t.tracks[t.currentTrackId],k=new u.a({}),v=m.a.create((t=>({displayNone:{display:"none"}})))}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/loader.AudioOnlyVideoPlayer.22d92a25.js.map